<!DOCTYPE html>
<html>
<head>
  <title>Black Hole</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script>
      AFRAME.registerComponent('toggle-dialog', {
        init: function() {
          this.facts = ["Hi! It appears you are near black hole BH-7A. Would you like some help taking measurements?",
                        "1. Deploy the gravitational wave sensor array in the vicinity of the black hole.",
                        "2. Record the black hole's mass, spin, and charge using the Hawking radiation spectrum.", 
                        "3. Measure the event horizon radius and its distortion due to gravitational lensing.",
                        "4. Analyze the surrounding accretion disk's temperature and luminosity.",
                        "5. Observe the magnetic field strength and orientation near the black hole.",
                        "6. Determine the black hole's spin axis and its alignment with the galaxy's central plane.",
                        "7. Monitor the emission of X-rays and gamma rays from the accretion disk.",
                        "8. Measure the time dilation and frame dragging effects caused by the black hole's gravity.",
                        "9. Capture high-resolution images of the jet streams emanating from the black hole.",
                        "10. Collect data on the interaction of nearby objects with the black hole's gravitational field.",
                        "That should do it! Your Galactic Federation cruiser will assist you."];
          this.currentFact = 0;
          this.el.addEventListener('click', (e) => {
            let dialog = document.querySelector('#dialog a-text');
            if (this.currentFact < this.facts.length) {
              dialog.setAttribute('value', this.facts[this.currentFact]);
              dialog.parentNode.setAttribute('visible', true);
              this.currentFact++;
            } else {
              dialog.parentNode.setAttribute('visible', false);
            }
          });
        }
      });
  </script>
</head>
<body>
    <a-scene cursor="rayOrigin: mouse">
      <a-assets>
        <img id="skyTexture" src="4k-space-texture.jpg">
        <a-asset-item id="blackHole" src="blackhole.glb"></a-asset-item>
        <a-asset-item id="clippIt" src="clippit.glb"></a-asset-item>
        <a-asset-item id="tarGet" src="target.glb"></a-asset-item>
        <a-asset-item id="greenMid" src="green_mid.glb"></a-asset-item>
        <a-asset-item id="bottomBar" src="bottom_bar.glb"></a-asset-item>
        <a-asset-item id="blueMid" src="blue_mid.glb"></a-asset-item>
        <a-asset-item id="ajf12Dvergr" src="ajf-12_dvergr.glb"></a-asset-item>
      </a-assets>
      <a-sky src="#skyTexture"></a-sky>
      <a-entity gltf-model="#blackHole" scale="50 50 50" position="0 -30 -200" animation="property: rotation; to: 0 360 0; dur: 10000; easing: linear; loop: true"></a-entity>
      <a-entity gltf-model="#ajf12Dvergr" scale="2.5 2.5 2.5" position="-3 1 -5" animation="property: position; to: -3 1.6 -5; dur: 2000; easing: easeInOutSine; loop: true; dir: alternate"></a-entity>      
      <a-entity gltf-model="#clippIt" scale="0.4 0.4 0.4" position="2 1.6 -2" toggle-dialog></a-entity>
      <a-entity id="dialog" visible="false" position="2.3 1.6 -2" scale="0.5 0.5 0.5" look-at="[camera]">
        <a-text value="Keep clicking for some facts about black holes!" color="#FFF" wrap-count="20"></a-text>
      </a-entity>
      <a-camera>
        <a-entity gltf-model="#tarGet" position="0 0 -1" scale="0.1 0.1 0.1"></a-entity>
        <a-entity gltf-model="#greenMid" position="0 0 -1" scale="0.1 0.1 0.1"></a-entity>
        <a-entity gltf-model="#bottomBar" position="0 0 -1" scale="0.2 0.2 0.2"></a-entity>
        <a-entity gltf-model="#blueMid" position="0 0 -1" scale="0.1 0.1 0.1"></a-entity>
      </a-camera>
    </a-scene>
</body>
</html>
